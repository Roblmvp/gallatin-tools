<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ServiceBridge ‚Äî Greet Log</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@300;400;500;600;700&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#07070E; --surface:#0F0F1A; --surface2:#161625; --surface3:#1C1C30;
  --border:rgba(255,255,255,0.07); --border2:rgba(255,255,255,0.14);
  --text:#EEE8FF; --muted:rgba(238,232,255,0.4); --muted2:rgba(238,232,255,0.22);
  --purple:#5B4FE8; --purple2:#7B72F0;
  --green:#22C55E; --gold:#E8B84B; --red:#C8102E;
  --r:12px;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{background:var(--bg);color:var(--text);font-family:'DM Sans',sans-serif;min-height:100vh;-webkit-font-smoothing:antialiased;}
.bg-orb1{position:fixed;top:-200px;right:-150px;width:600px;height:600px;border-radius:50%;background:radial-gradient(circle,rgba(34,197,94,0.1) 0%,transparent 70%);pointer-events:none;z-index:0;}
.bg-orb2{position:fixed;bottom:-150px;left:-100px;width:500px;height:500px;border-radius:50%;background:radial-gradient(circle,rgba(91,79,232,0.08) 0%,transparent 70%);pointer-events:none;z-index:0;}

nav{position:sticky;top:0;z-index:100;background:rgba(7,7,14,0.95);backdrop-filter:blur(16px);border-bottom:1px solid var(--border);padding:0 24px;height:56px;display:flex;align-items:center;justify-content:space-between;}
nav::after{content:'';position:absolute;bottom:0;left:0;right:0;height:1px;background:linear-gradient(90deg,var(--green),transparent,var(--purple),transparent);}
.nav-brand{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:0.06em;color:#fff;}
.nav-sub{font-size:12px;color:var(--muted);font-weight:500;}
.nav-back{font-size:12px;font-weight:600;color:var(--muted);text-decoration:none;padding:6px 12px;border-radius:7px;transition:all 0.18s;border:1px solid var(--border);}
.nav-back:hover{color:var(--text);border-color:var(--border2);}

.page{max-width:560px;margin:0 auto;padding:32px 20px 100px;position:relative;z-index:1;}

/* Progress */
.progress-bar{height:3px;background:var(--surface2);border-radius:2px;margin-bottom:32px;overflow:hidden;}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--green),#4ADE80);border-radius:2px;transition:width 0.4s cubic-bezier(0.4,0,0.2,1);}
.progress-label{font-size:10px;font-weight:600;letter-spacing:0.14em;text-transform:uppercase;color:var(--muted2);margin-bottom:8px;display:flex;justify-content:space-between;}

/* Step */
.step{display:none;}
.step.active{display:block;animation:fadeUp 0.35s ease both;}
@keyframes fadeUp{from{opacity:0;transform:translateY(14px);}to{opacity:1;transform:translateY(0);}}

.step-eyebrow{font-size:10px;font-weight:700;letter-spacing:0.18em;text-transform:uppercase;color:var(--green);margin-bottom:10px;display:flex;align-items:center;gap:8px;}
.step-eyebrow::before{content:'';display:inline-block;width:18px;height:2px;background:var(--green);border-radius:2px;}
.step-title{font-family:'Bebas Neue',sans-serif;font-size:42px;letter-spacing:0.03em;line-height:1;margin-bottom:6px;}
.step-sub{font-size:14px;color:var(--muted);margin-bottom:28px;line-height:1.6;}

/* Field */
.field{margin-bottom:20px;}
.field-label{font-size:10px;font-weight:700;letter-spacing:0.14em;text-transform:uppercase;color:var(--muted2);margin-bottom:8px;display:block;}
.field-input,.field-select,.field-textarea{
  width:100%;background:var(--surface);border:1.5px solid var(--border2);
  border-radius:10px;color:var(--text);font-family:'DM Sans',sans-serif;
  font-size:15px;padding:13px 16px;transition:border-color 0.18s;
  -webkit-appearance:none;
}
.field-input:focus,.field-select:focus,.field-textarea:focus{outline:none;border-color:var(--green);box-shadow:0 0 0 3px rgba(34,197,94,0.1);}
.field-textarea{resize:none;min-height:80px;}
.field-select option{background:var(--surface2);}

/* Option grid */
.option-grid{display:grid;gap:10px;}
.option-grid.cols2{grid-template-columns:1fr 1fr;}
.option-grid.cols3{grid-template-columns:1fr 1fr 1fr;}
.option-btn{
  background:var(--surface);border:1.5px solid var(--border2);
  border-radius:10px;padding:14px 12px;
  cursor:pointer;text-align:center;transition:all 0.18s;
  font-family:'DM Sans',sans-serif;
}
.option-btn:hover{border-color:var(--border2);background:rgba(255,255,255,0.06);}
.option-btn.selected{border-color:var(--green);background:rgba(34,197,94,0.1);box-shadow:0 0 0 1px var(--green);}
.option-icon{font-size:22px;margin-bottom:6px;}
.option-label{font-size:13px;font-weight:600;color:var(--text);}
.option-sub{font-size:11px;color:var(--muted);margin-top:2px;}

/* Outcome special colors */
.option-btn.out-sold.selected{border-color:var(--green);background:rgba(34,197,94,0.12);}
.option-btn.out-demo.selected{border-color:var(--purple);background:rgba(91,79,232,0.12);}
.option-btn.out-writeup.selected{border-color:var(--gold);background:rgba(232,184,75,0.12);}
.option-btn.out-appt.selected{border-color:#38BDF8;background:rgba(56,189,248,0.1);}
.option-btn.out-left-return.selected{border-color:var(--gold);background:rgba(232,184,75,0.08);}
.option-btn.out-left-no.selected{border-color:rgba(255,255,255,0.2);background:rgba(255,255,255,0.04);}
.option-btn.out-handoff.selected{border-color:var(--purple2);background:rgba(123,114,240,0.12);}

/* Nav buttons */
.btn-row{display:flex;gap:12px;margin-top:28px;}
.btn-next{
  flex:1;padding:16px;border-radius:12px;
  background:linear-gradient(135deg,var(--green),#16A34A);
  color:#fff;border:none;font-family:'DM Sans',sans-serif;
  font-size:15px;font-weight:700;cursor:pointer;
  transition:all 0.18s;letter-spacing:0.02em;
}
.btn-next:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(34,197,94,0.35);}
.btn-next:disabled{opacity:0.4;pointer-events:none;}
.btn-back{
  padding:16px 20px;border-radius:12px;
  background:var(--surface);border:1.5px solid var(--border2);
  color:var(--muted);font-family:'DM Sans',sans-serif;
  font-size:15px;font-weight:600;cursor:pointer;transition:all 0.18s;
}
.btn-back:hover{color:var(--text);border-color:var(--border2);}

/* Review card */
.review-card{background:var(--surface);border:1px solid var(--border2);border-radius:14px;padding:20px;margin-bottom:16px;}
.review-section-title{font-size:9px;font-weight:700;letter-spacing:0.16em;text-transform:uppercase;color:var(--muted2);margin-bottom:12px;}
.review-row{display:flex;justify-content:space-between;align-items:baseline;padding:6px 0;border-bottom:1px solid rgba(255,255,255,0.04);}
.review-row:last-child{border-bottom:none;}
.review-key{font-size:12px;color:var(--muted);}
.review-val{font-size:13px;font-weight:600;color:var(--text);text-align:right;max-width:200px;}

/* Success */
.success-screen{display:none;text-align:center;padding:60px 20px;}
.success-icon{font-size:64px;margin-bottom:20px;animation:pop 0.5s cubic-bezier(0.34,1.56,0.64,1) both;}
@keyframes pop{from{transform:scale(0);}to{transform:scale(1);}}
.success-title{font-family:'Bebas Neue',sans-serif;font-size:48px;letter-spacing:0.04em;color:var(--green);margin-bottom:8px;}
.success-sub{font-size:15px;color:var(--muted);margin-bottom:36px;line-height:1.6;}
.success-btn{display:inline-flex;align-items:center;gap:8px;padding:14px 28px;border-radius:12px;background:linear-gradient(135deg,var(--green),#16A34A);color:#fff;border:none;font-family:'DM Sans',sans-serif;font-size:15px;font-weight:700;cursor:pointer;text-decoration:none;transition:all 0.18s;margin:6px;}
.success-btn:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(34,197,94,0.3);}
.success-btn.secondary{background:var(--surface);border:1.5px solid var(--border2);color:var(--muted);}
.success-btn.secondary:hover{color:var(--text);box-shadow:none;}
</style>
</head>
<body>
<div class="bg-orb1"></div>
<div class="bg-orb2"></div>

<nav>
  <div style="display:flex;align-items:center;gap:10px;">
    <div class="nav-brand">ServiceBridge</div>
    <span style="color:var(--border2);font-size:16px;">|</span>
    <div class="nav-sub">Greet Log</div>
  </div>
  <a href="login.html" class="nav-back">‚Üê Dashboard</a>
</nav>

<div class="page">

  <!-- Progress -->
  <div>
    <div class="progress-label">
      <span id="step-label">Step 1 of 5</span>
      <span id="step-pct">20%</span>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progress-fill" style="width:20%"></div></div>
  </div>

  <!-- STEP 1: Rep -->
  <div class="step active" id="step-1">
    <div class="step-eyebrow">Step 1</div>
    <div class="step-title">Who Are You?</div>
    <div class="step-sub">Select your name to log this greet</div>
    <div class="option-grid cols2">
      <div class="option-btn" onclick="selectRep('Tyler Doyle','TD',this)">
        <div class="option-icon">üëî</div>
        <div class="option-label">Tyler Doyle</div>
        <div class="option-sub">S2S Manager</div>
      </div>
      <div class="option-btn" onclick="selectRep('Andrew Kirk','AK',this)">
        <div class="option-icon">ü§ù</div>
        <div class="option-label">Andrew Kirk</div>
        <div class="option-sub">Sales</div>
      </div>
      <div class="option-btn" onclick="selectRep('DJ Rogers','DJ',this)">
        <div class="option-icon">ü§ù</div>
        <div class="option-label">DJ Rogers</div>
        <div class="option-sub">Sales</div>
      </div>
      <div class="option-btn" onclick="selectRep('Kody McCann','KM',this)">
        <div class="option-icon">ü§ù</div>
        <div class="option-label">Kody McCann</div>
        <div class="option-sub">Sales</div>
      </div>
    </div>
    <div class="btn-row"><button class="btn-next" id="next-1" onclick="goTo(2)" disabled>Continue ‚Üí</button></div>
  </div>

  <!-- STEP 2: Up Source + Customer -->
  <div class="step" id="step-2">
    <div class="step-eyebrow">Step 2</div>
    <div class="step-title">The Up</div>
    <div class="step-sub">How did this customer arrive?</div>
    <div class="option-grid cols2" style="margin-bottom:20px;">
      <div class="option-btn" onclick="selectSource('Lot Walk-In',this)">
        <div class="option-icon">üö∂</div>
        <div class="option-label">Lot Walk-In</div>
      </div>
      <div class="option-btn" onclick="selectSource('Showroom Walk-In',this)">
        <div class="option-icon">üè¢</div>
        <div class="option-label">Showroom Walk-In</div>
      </div>
      <div class="option-btn" onclick="selectSource('Service Drive',this)">
        <div class="option-icon">üîß</div>
        <div class="option-label">Service Drive</div>
      </div>
      <div class="option-btn" onclick="selectSource('Internet Lead',this)">
        <div class="option-icon">üíª</div>
        <div class="option-label">Internet Lead</div>
      </div>
      <div class="option-btn" onclick="selectSource('Phone Up',this)">
        <div class="option-icon">üìû</div>
        <div class="option-label">Phone Up</div>
      </div>
      <div class="option-btn" onclick="selectSource('Be-Back / Referral',this)">
        <div class="option-icon">üîÑ</div>
        <div class="option-label">Be-Back / Referral</div>
      </div>
    </div>
    <div class="field">
      <label class="field-label">Customer Name (optional)</label>
      <input class="field-input" type="text" id="customer-name" placeholder="First Last" autocomplete="off">
    </div>
    <div class="btn-row">
      <button class="btn-back" onclick="goTo(1)">‚Üê</button>
      <button class="btn-next" id="next-2" onclick="goTo(3)" disabled>Continue ‚Üí</button>
    </div>
  </div>

  <!-- STEP 3: Vehicle of Interest -->
  <div class="step" id="step-3">
    <div class="step-eyebrow">Step 3</div>
    <div class="step-title">Vehicle of Interest</div>
    <div class="step-sub">What were they shopping for?</div>
    <div class="option-grid cols2" style="margin-bottom:20px;">
      <div class="option-btn" onclick="selectVOIType('New',this)">
        <div class="option-icon">‚ú®</div>
        <div class="option-label">New Vehicle</div>
      </div>
      <div class="option-btn" onclick="selectVOIType('Used',this)">
        <div class="option-icon">üöó</div>
        <div class="option-label">Used Vehicle</div>
      </div>
      <div class="option-btn" onclick="selectVOIType('CPO',this)">
        <div class="option-icon">üè∑Ô∏è</div>
        <div class="option-label">CPO</div>
      </div>
      <div class="option-btn" onclick="selectVOIType('Unsure / Browsing',this)">
        <div class="option-icon">üëÄ</div>
        <div class="option-label">Just Browsing</div>
      </div>
    </div>
    <div class="field">
      <label class="field-label">Specific Vehicle (optional)</label>
      <input class="field-input" type="text" id="voi-detail" placeholder="e.g. 2024 Ram 1500, Jeep Grand Cherokee..." autocomplete="off">
    </div>
    <div class="btn-row">
      <button class="btn-back" onclick="goTo(2)">‚Üê</button>
      <button class="btn-next" id="next-3" onclick="goTo(4)" disabled>Continue ‚Üí</button>
    </div>
  </div>

  <!-- STEP 4: Outcome + Time -->
  <div class="step" id="step-4">
    <div class="step-eyebrow">Step 4</div>
    <div class="step-title">What Happened?</div>
    <div class="step-sub">Log the outcome of this up</div>
    <div class="option-grid cols2" style="margin-bottom:20px;">
      <div class="option-btn out-sold" onclick="selectOutcome('Sold',this)">
        <div class="option-icon">üéâ</div>
        <div class="option-label">Sold</div>
        <div class="option-sub">Closed the deal</div>
      </div>
      <div class="option-btn out-demo" onclick="selectOutcome('Demo / Test Drive',this)">
        <div class="option-icon">üö¶</div>
        <div class="option-label">Demo / Test Drive</div>
        <div class="option-sub">Drove a vehicle</div>
      </div>
      <div class="option-btn out-writeup" onclick="selectOutcome('Write-Up / Working Numbers',this)">
        <div class="option-icon">üìù</div>
        <div class="option-label">Write-Up</div>
        <div class="option-sub">Working numbers</div>
      </div>
      <div class="option-btn out-appt" onclick="selectOutcome('Appointment Set',this)">
        <div class="option-icon">üìÖ</div>
        <div class="option-label">Appointment Set</div>
        <div class="option-sub">Scheduled to return</div>
      </div>
      <div class="option-btn out-left-return" onclick="selectOutcome('Left ‚Äî Will Return',this)">
        <div class="option-icon">‚Ü©Ô∏è</div>
        <div class="option-label">Left ‚Äî Will Return</div>
        <div class="option-sub">Positive, coming back</div>
      </div>
      <div class="option-btn out-left-no" onclick="selectOutcome('Left ‚Äî No Interest',this)">
        <div class="option-icon">üö™</div>
        <div class="option-label">Left ‚Äî No Interest</div>
        <div class="option-sub">Walked without buying</div>
      </div>
      <div class="option-btn out-handoff" onclick="selectOutcome('Handed Off',this)">
        <div class="option-icon">ü§ù</div>
        <div class="option-label">Handed Off</div>
        <div class="option-sub">Passed to another rep</div>
      </div>
      <div class="option-btn out-left-no" onclick="selectOutcome('Follow-Up Required',this)">
        <div class="option-icon">üìû</div>
        <div class="option-label">Follow-Up Required</div>
        <div class="option-sub">Needs more contact</div>
      </div>
    </div>

    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:4px;">
      <div class="field">
        <label class="field-label">Time on Lot</label>
        <select class="field-select" id="time-on-lot">
          <option value="">‚Äî Select ‚Äî</option>
          <option>Under 15 min</option>
          <option>15‚Äì30 min</option>
          <option>30‚Äì60 min</option>
          <option>1‚Äì2 hours</option>
          <option>2+ hours</option>
        </select>
      </div>
      <div class="field">
        <label class="field-label">Manager Involved?</label>
        <select class="field-select" id="manager-involved">
          <option value="No">No</option>
          <option value="Yes">Yes</option>
        </select>
      </div>
    </div>

    <div class="field" id="handoff-field" style="display:none;">
      <label class="field-label">Handed Off To</label>
      <input class="field-input" type="text" id="handed-off-to" placeholder="Rep name...">
    </div>

    <div class="btn-row">
      <button class="btn-back" onclick="goTo(3)">‚Üê</button>
      <button class="btn-next" id="next-4" onclick="goTo(5)" disabled>Continue ‚Üí</button>
    </div>
  </div>

  <!-- STEP 5: Notes + Review -->
  <div class="step" id="step-5">
    <div class="step-eyebrow">Step 5</div>
    <div class="step-title">Review & Submit</div>
    <div class="step-sub">Add any notes, then confirm your greet log</div>

    <div class="field" style="margin-bottom:20px;">
      <label class="field-label">Notes (optional)</label>
      <textarea class="field-textarea" id="greet-notes" placeholder="Anything worth noting about this customer or interaction..."></textarea>
    </div>

    <div class="review-card" id="review-card"></div>

    <div class="btn-row">
      <button class="btn-back" onclick="goTo(4)">‚Üê</button>
      <button class="btn-next" onclick="submitGreet()">‚úì Submit Greet Log</button>
    </div>
  </div>

  <!-- SUCCESS -->
  <div class="success-screen" id="success">
    <div class="success-icon">‚úÖ</div>
    <div class="success-title">Greet Logged!</div>
    <div class="success-sub" id="success-msg">Nice work. Keep engaging every up.</div>
    <div>
      <button class="success-btn" onclick="resetForm()">+ Log Another Up</button>
      <a href="login.html" class="success-btn secondary">‚Üê Dashboard</a>
    </div>
  </div>

</div>

<script>
const SB_URL = 'https://jbkgwtohwsbaorhvuuqb.supabase.co';
const SB_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impia2d3dG9od3NiYW9yaHZ1dXFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5NjkwNDIsImV4cCI6MjA4NzU0NTA0Mn0.GRXOYbIuVDxU9-FEBYmyd1QmytVUrMIAxbnOSfepzuU';
const H = {'apikey':SB_KEY,'Authorization':'Bearer '+SB_KEY,'Content-Type':'application/json'};

const form = {
  rep_name:'', customer_name:'', up_source:'', voi:'', voi_type:'',
  outcome:'', time_on_lot:'', manager_involved:'No', handed_off_to:'', notes:''
};

const STEPS = 5;
const PROGRESS = [20,40,60,80,100];

function goTo(n) {
  document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
  document.getElementById('step-'+n).classList.add('active');
  document.getElementById('step-label').textContent = `Step ${n} of ${STEPS}`;
  document.getElementById('step-pct').textContent = PROGRESS[n-1]+'%';
  document.getElementById('progress-fill').style.width = PROGRESS[n-1]+'%';
  if (n===5) buildReview();
  window.scrollTo({top:0,behavior:'smooth'});
}

function clearGroup(el) { el.closest('.option-grid').querySelectorAll('.option-btn').forEach(b=>b.classList.remove('selected')); }

function selectRep(name, initials, el) {
  clearGroup(el); el.classList.add('selected');
  form.rep_name = name;
  document.getElementById('next-1').disabled = false;
}
function selectSource(src, el) {
  clearGroup(el); el.classList.add('selected');
  form.up_source = src;
  document.getElementById('next-2').disabled = false;
}
function selectVOIType(type, el) {
  clearGroup(el); el.classList.add('selected');
  form.voi_type = type;
  document.getElementById('next-3').disabled = false;
}
function selectOutcome(outcome, el) {
  el.closest('.option-grid').querySelectorAll('.option-btn').forEach(b=>b.classList.remove('selected'));
  el.classList.add('selected');
  form.outcome = outcome;
  document.getElementById('next-4').disabled = false;
  document.getElementById('handoff-field').style.display = outcome==='Handed Off' ? 'block' : 'none';
}

function buildReview() {
  form.customer_name = document.getElementById('customer-name').value;
  form.voi = document.getElementById('voi-detail').value;
  form.time_on_lot = document.getElementById('time-on-lot').value;
  form.manager_involved = document.getElementById('manager-involved').value;
  form.handed_off_to = document.getElementById('handed-off-to').value;
  form.notes = document.getElementById('greet-notes').value;

  const rows = [
    ['Rep', form.rep_name],
    ['Customer', form.customer_name || 'Not provided'],
    ['Up Source', form.up_source],
    ['Vehicle Type', form.voi_type],
    ['Vehicle', form.voi || '‚Äî'],
    ['Outcome', form.outcome],
    ['Time on Lot', form.time_on_lot || '‚Äî'],
    ['Manager Involved', form.manager_involved],
    form.handed_off_to ? ['Handed Off To', form.handed_off_to] : null,
    form.notes ? ['Notes', form.notes] : null,
  ].filter(Boolean);

  document.getElementById('review-card').innerHTML = `
    <div class="review-section-title">Greet Summary</div>
    ${rows.map(([k,v])=>`<div class="review-row"><span class="review-key">${k}</span><span class="review-val">${v}</span></div>`).join('')}
  `;
}

async function submitGreet() {
  form.customer_name = document.getElementById('customer-name').value;
  form.voi = document.getElementById('voi-detail').value;
  form.time_on_lot = document.getElementById('time-on-lot').value;
  form.manager_involved = document.getElementById('manager-involved').value;
  form.handed_off_to = document.getElementById('handed-off-to').value;
  form.notes = document.getElementById('greet-notes').value;

  try {
    await fetch(`${SB_URL}/rest/v1/greet_log`, {
      method:'POST', headers:H, body:JSON.stringify(form)
    });
    document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
    document.getElementById('progress-fill').style.width = '100%';
    const outcomes = {
      'Sold':'üî• Deal logged! Great work.',
      'Demo / Test Drive':'Good engagement ‚Äî follow up strong.',
      'Write-Up / Working Numbers':'Keep working it ‚Äî you\'re close.',
      'Appointment Set':'Appointment set. Confirm 24 hours before.',
      'Left ‚Äî Will Return':'Follow up within 2 hours while you\'re fresh.',
      'Left ‚Äî No Interest':'On to the next one.',
      'Handed Off':'Logged and handed off.',
      'Follow-Up Required':'Set a reminder and call them today.',
    };
    document.getElementById('success-msg').textContent = outcomes[form.outcome] || 'Greet logged successfully.';
    document.getElementById('success').style.display = 'block';
  } catch(err) {
    alert('Error submitting. Check connection.');
  }
}

function resetForm() {
  Object.keys(form).forEach(k=>form[k]='');
  form.manager_involved = 'No';
  document.querySelectorAll('.option-btn').forEach(b=>b.classList.remove('selected'));
  document.querySelectorAll('.field-input,.field-textarea').forEach(f=>f.value='');
  document.querySelectorAll('.field-select').forEach(f=>f.selectedIndex=0);
  ['next-1','next-2','next-3','next-4'].forEach(id=>document.getElementById(id).disabled=true);
  document.getElementById('success').style.display='none';
  document.getElementById('handoff-field').style.display='none';
  goTo(1);
}

// Pre-fill rep from session
const savedRep = sessionStorage.getItem('sb_rep');
if (savedRep) {
  const rep = JSON.parse(savedRep);
  const btns = document.querySelectorAll('#step-1 .option-btn');
  btns.forEach(btn => {
    if (btn.querySelector('.option-label')?.textContent === rep.name) {
      btn.classList.add('selected');
      form.rep_name = rep.name;
      document.getElementById('next-1').disabled = false;
    }
  });
}
</script>
</body>
</html>
